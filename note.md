## Overview
RepRally HeatMap Center is a web app that will be able to show the users the aggregated stores'lifetime GMV as a geographical state heatmap, and then the user is able to click on any of the states to zoom in on to that specific state, and it will show the location of stores that purchased before as a circle, and the location of sellers that have account created as a cross, and when hover on a store, it will show the store's lifetime GMV, GMV last month, GMV this month and most recent seller full name info, and when hover on a seller, it will show the seller's lifetime gmv, number of stores that it sold to last month, number of stores he/she sold to month to date, thr seller's GMV last month and the seller's lifetime GMV, and GMV this month

## Data collection
The application will use the data by connecting the snowflakes API, 

    user='NICOLE',
    password='Zjy.20010628nicole',
    account='FEBEOOK-RVB78017',
    warehouse='COMPUTE_WH',
    database='REPRALLY',
    schema='ANALYTICS',
    role = 'USERADMIN'

The table names are "STORES" and "SELLERS" and "ORDERS"

STORES table definition is: 

create or replace TRANSIENT TABLE REPRALLY.ANALYTICS.STORES (
	STORE_ID NUMBER(38,0),
	SELLER_ID NUMBER(38,0),
	VENDOR_ID NUMBER(38,0),
	STORE_ADDRESS_ID NUMBER(38,0),
	STORE_CREATED_AT TIMESTAMP_NTZ(9),
	STORE_STATUS VARCHAR(16777216),
	STORE_TYPE VARCHAR(16777216),
	STORE_PAYMENT_TERMS NUMBER(38,0),
	VENDOR_FIRST_NAME VARCHAR(16777216),
	VENDOR_LAST_NAME VARCHAR(16777216),
	VENDOR_EMAIL VARCHAR(16777216),
	VENDOR_PHONE VARCHAR(16777216),
	STORE_LOCATION_NAME VARCHAR(16777216),
	STORE_ADDRESS VARCHAR(16777216),
	STORE_STATE VARCHAR(16777216),
	STORE_CITY VARCHAR(16777216),
	STORE_ZIP_CODE VARCHAR(16777216),
	STORE_ZCTA VARCHAR(16777216),
	STORE_DMA_ID VARCHAR(16777216),
	STORE_DMA_NAME VARCHAR(16777216),
	STORE_PLACE_ID VARCHAR(16777216),
	STORE_GEOHASH VARCHAR(16777216),
	LATITUDE FLOAT,
	LONGITUDE FLOAT,
	URBANICITY VARCHAR(16777216),
	WEALTH_CLASSIFICATION VARCHAR(18),
	ETHNICITY_CLASSIFICATION VARCHAR(22),
	COMMUNITY_CLASSIFICATION VARCHAR(19),
	LANGUAGE_CLASSIFICATION VARCHAR(28),
	PLACE_BUSINESS_STATUS VARCHAR(16777216),
	PLACE_PRICE_LEVEL NUMBER(38,0),
	PLACE_RATING FLOAT,
	PLACE_RATING_COUNT NUMBER(38,0),
	PLACE_REVIEWS VARIANT,
	PLACE_TYPES VARIANT,
	LAST_ACTIVITY_DATE DATE,
	LAST_ACTIVITY_SELLER_ID NUMBER(38,0),
	SELLER_FIRST_NAME VARCHAR(16777216),
	SELLER_LAST_NAME VARCHAR(16777216),
	SELLER_PHONE VARCHAR(16777216),
	RM_REGION VARCHAR(16777216),
	LATEST_SELLER_ID NUMBER(38,0),
	STORE_LIFETIME_GMV NUMBER(38,6),
	STORE_LIFETIME_ORDERS NUMBER(18,0),
	STORE_LIFETIME_ISSUE_ORDERS NUMBER(18,0),
	FIRST_ORDER_AT TIMESTAMP_NTZ(9),
	LAST_ORDER_AT TIMESTAMP_NTZ(9),
	STORE_AGE_DAYS NUMBER(9,0),
	STORE_AGE_WEEKS NUMBER(9,0),
	STORE_AGE_MONTHS NUMBER(9,0),
	GMV_CURRENT_MONTH NUMBER(38,6),
	MARKETPLACE_FEES_CURRENT_MONTH NUMBER(38,6),
	ORDERS_LAST_MONTH NUMBER(18,0),
	GMV_LAST_MONTH NUMBER(38,6),
	MARKETPLACE_FEES_LAST_MONTH NUMBER(38,6),
	ORDERS_TWO_MONTHS_AGO NUMBER(18,0),
	ORDERS_FIVETOEIGHT_WEEKS NUMBER(18,0),
	ORDERS_NINETOTWELVE_WEEKS NUMBER(18,0),
	ORDERS_THIRTYTOSIXTY_DAYS NUMBER(18,0),
	ORDERS_SIXTYTONINETY_DAYS NUMBER(18,0),
	IS_SELLER_ACCOUNT_ACTIVE BOOLEAN,
	SELLER_DAYS_SINCE_LAST_ORDER NUMBER(9,0),
	DISTINCT_PRODUCT_NAMES ARRAY,
	DISTINCT_PRODUCT_IDS ARRAY,
	CATEGORIES_JSON_LAST_3_ORDERS OBJECT,
	NUM_DISTINCT_PRODUCTS NUMBER(18,0),
	DISTINCT_PRODUCT_CATEGORIES VARCHAR(16777216),
	DISTINCT_PRODUCT_SUBCATEGORIES VARCHAR(16777216),
	MARKETPLACE_FEES_RR NUMBER(38,6),
	DAYS_SINCE_ORDER NUMBER(9,0),
	WEEKS_SINCE_ORDER NUMBER(9,0),
	MONTHS_SINCE_ORDER NUMBER(9,0),
	DAYS_SINCE_ACTIVITY NUMBER(9,0),
	STORE_MONTHLY_STATUS VARCHAR(19),
	STORE_WEEKLY_STATUS VARCHAR(19),
	STORE_DAILY_STATUS VARCHAR(19),
	AVG_ORDER_CYCLE_DAYS NUMBER(15,6),
	STORE_ORDER_STAGE VARCHAR(16777216),
	STORE_CHECKIN_STAGE VARCHAR(16777216),
	STORE_FUNNEL_STATUS VARCHAR(41)
);

SELLERS table definition is:
create or replace TRANSIENT TABLE REPRALLY.ANALYTICS.SELLERS (
	SELLER_ID NUMBER(38,0),
	SELLER_TYPE VARCHAR(16777216),
	SELLER_FIRST_NAME VARCHAR(16777216),
	SELLER_LAST_NAME VARCHAR(16777216),
	SELLER_FULL_NAME VARCHAR(16777216),
	SELLER_PHONE VARCHAR(16777216),
	SELLER_EMAIL VARCHAR(16777216),
	IS_ACCOUNT_ACTIVE BOOLEAN,
	ACCOUNT_CREATED_AT TIMESTAMP_NTZ(9),
	ACCOUNT_START_DATE TIMESTAMP_NTZ(9),
	ACCOUNT_BALANCE NUMBER(38,6),
	REFERRAL_SOURCE VARCHAR(16777216),
	SELLER_ADDRESS VARCHAR(16777216),
	SELLER_CITY VARCHAR(16777216),
	SELLER_STATE VARCHAR(16777216),
	SELLER_ZIP_CODE VARCHAR(16777216),
	SELLER_COUNTRY VARCHAR(16777216),
	LATITUDE FLOAT,
	LONGITUDE FLOAT,
	SELLER_GEOHASH VARCHAR(16777216),
	RM_REGION VARCHAR(16777216),
	SELLER_DMA_ID VARCHAR(16777216),
	SELLER_DMA_NAME VARCHAR(16777216),
	SELLER_CBSA VARCHAR(16777216),
	SELLER_ZCTA VARCHAR(16777216),
	SELLER_TOTAL_GMV NUMBER(38,6),
	FIRST_ORDER_AT TIMESTAMP_NTZ(9),
	LAST_ORDER_AT DATE,
	SELLER_DAYS_SINCE_ORDER NUMBER(9,0),
	ORDERS_TWO_MONTHS_AGO NUMBER(18,0),
	ORDERS_LAST_FOUR_WEEKS NUMBER(18,0),
	ORDERS_LAST_EIGHT_WEEKS NUMBER(18,0),
	ORDERS_LAST_MONTH NUMBER(18,0),
	STORES_LAST_MONTH NUMBER(18,0),
	GMV_LAST_MONTH NUMBER(38,6),
	ALT_GMV_LAST_MONTH NUMBER(38,6),
	NEW_STORES_LAST_MONTH NUMBER(18,0),
	PCT_ALT_GMV_LAST_MONTH NUMBER(38,12),
	ORDERS_MTD NUMBER(18,0),
	STORES_MTD NUMBER(18,0),
	GMV_MTD NUMBER(38,6),
	ALT_GMV_MTD NUMBER(38,6),
	NEW_STORES_MTD NUMBER(18,0),
	PCT_ALT_GMV_MTD NUMBER(38,12),
	NUM_DISTINCT_PRODUCTS NUMBER(18,0),
	DISTINCT_PRODUCT_CATEGORIES VARCHAR(16777216),
	MONTHS_SINCE_ORDER NUMBER(9,0),
	WEEKS_SINCE_ORDER NUMBER(9,0),
	STORE_MONTHLY_STATUS VARCHAR(19),
	STORE_WEEKLY_STATUS VARCHAR(19),
	IS_MONTHLY_ACTIVE NUMBER(1,0),
	IS_WEEKLY_ACTIVE NUMBER(1,0),
	SELLER_LEVEL NUMBER(38,0)
);

create or replace TRANSIENT TABLE REPRALLY.ANALYTICS.ORDERS (
	ORDER_ID NUMBER(38,0),
	ORDER_SECONDARY_ID VARCHAR(16777216),
	ORDER_STATUS VARCHAR(16777216),
	PAYMENT_STATUS VARCHAR(16777216),
	FULFILLMENT_STATUS VARCHAR(16777216),
	SELLER_ID NUMBER(38,0),
	RM_REGION VARCHAR(16777216),
	VENDOR_ID NUMBER(38,0),
	VENDOR_ADDRESS_ID NUMBER(38,0),
	STORE_STATE VARCHAR(16777216),
	STORE_DMA_ID VARCHAR(16777216),
	STORE_DMA_NAME VARCHAR(16777216),
	STORE_ZCTA VARCHAR(16777216),
	STORE_ZIP_CODE VARCHAR(16777216),
	STORE_URBANICITY VARCHAR(16777216),
	ORDER_CREATED_AT TIMESTAMP_NTZ(9),
	ORDER_CREATED_AT_ORIGINAL TIMESTAMP_NTZ(9),
	ORDER_APPROVAL_AT TIMESTAMP_TZ(9),
	ORDER_FULFILLED_AT TIMESTAMP_NTZ(9),
	ORDER_DUE_DATE TIMESTAMP_NTZ(9),
	IS_SAMPLE BOOLEAN,
	ORDERED_BY VARCHAR(16777216),
	IS_EXTENDED BOOLEAN,
	IS_SELLER_GUARANTEE BOOLEAN,
	PAYMENT_METHOD_ID NUMBER(38,0),
	PAYMENT_ORIGIN VARCHAR(16777216),
	STORE_ID NUMBER(38,0),
	ORDER_APPROVAL_ID NUMBER(38,0),
	ORDER_APPROVAL_STATUS VARCHAR(16777216),
	ORDER_QUANTITY NUMBER(38,0),
	ORDER_GMV NUMBER(38,6),
	ORDER_MARKETPLACE_FEES NUMBER(38,6),
	ORDER_ALT_GMV NUMBER(38,6),
	ORDER_BRAND_GMV NUMBER(38,6),
	ORDER_WHOLESALE_GMV NUMBER(38,6),
	ORDER_COMMISSION_FEE NUMBER(38,6),
	ORDER_BRAND_COMMISSION_FEE NUMBER(38,6),
	ORDER_PLATFORM_FEE NUMBER(38,6),
	ORDER_TAX NUMBER(38,6),
	SUBSIDY_RR NUMBER(38,6),
	TRACKING_CODES ARRAY,
	TRACKING_SOURCES ARRAY,
	NUM_DISTINCT_PRODUCTS NUMBER(18,0),
	DISTINCT_PRODUCT_DETAILED ARRAY,
	DISTINCT_BRANDS ARRAY,
	DISTINCT_PRODUCT_CATEGORIES ARRAY,
	DISTINCT_PRODUCT_NAMES ARRAY,
	DISTINCT_PRODUCT_IDS ARRAY,
	NUM_ORDER_PRODUCT_ISSUES NUMBER(30,0),
	NUM_ISSUE_UNITS NUMBER(38,0),
	INTERNAL_ISSUE_CREDIT_MONEY NUMBER(38,6),
	EXTERNAL_ISSUE_CREDIT_MONEY NUMBER(38,6),
	CATEGORIES_JSON OBJECT,
	PCT_ALT_GMV NUMBER(38,12),
	HAS_ESSENTIALS NUMBER(1,0),
	NUM_ORDER_ISSUES NUMBER(18,0),
	ISSUE_TYPES ARRAY,
	STORE_ORDER_RANK NUMBER(18,0),
	STORE_ORDER_RANK_DESC NUMBER(18,0),
	SELLER_ORDER_RANK NUMBER(18,0),
	LATEST_SELLER_ID NUMBER(38,0)
);

## User Stores and User Case
1. As an user, I can see the home page
2. As an user, I can see the aggregated heatmap that shows the aggregated "GMV LAST MONTH" and "GMV THIS MONTH" from STORES table by states geographic maps as a general heatmap, the darker the color, the higher the aggregated GMV LAST MONTH.
3. As an user, I can hover on any of the state, with the information of (count of stores, the total GMV last month by each state) at the side
4. As an user, I can click any of the states on the heatmap, and it will reload the page to display the clicked state's geographical city map 
5. As an user, I can see the state geographical city map, i can see the location of stores that purchased before as a circle, and the location of sellers that have account created as a cross
6. As an user, I can hover on a store, with the store's information including lifetime GMV, GMV last month, GMV this month and most recent seller full name info, 
7. As an user, I can also hover on seller, with the seller's information including the seller's lifetime gmv, number of stores that it sold to last month, number of stores he/she sold to month to date, thr seller's GMV last month and the seller's lifetime GMV, and GMV this month
6. As an user, I can click on a seller, and see a network map that connect the seller with the stores that the seller sold to in the past using a dotted line 
7. As an user, I can click on "GO back" button, to go back to the last level of the map, the general heatmap, with all the stores and seller's location hidden. 


